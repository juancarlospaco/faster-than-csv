/* Generated by Nim Compiler v1.3.7 */
/*   (c) 2020 Andreas Rumpf */
/* The generated code is subject to the original license. */
#define NIM_INTBITS 64

/* section: NIM_merge_HEADERS */

#include "nimbase.h"
#include <string.h>
#undef LANGUAGE_C
#undef MIPSEB
#undef MIPSEL
#undef PPC
#undef R3000
#undef R4000
#undef i386
#undef linux
#undef mips
#undef near
#undef far
#undef powerpc
#undef unix

/* section: NIM_merge_FRAME_DEFINES */
#define nimfr_(x, y)
#define nimln_(x, y)

/* section: NIM_merge_FORWARD_TYPES */
typedef struct tySequence__4CoKBAViiN2VV33Ov2SWmA tySequence__4CoKBAViiN2VV33Ov2SWmA;
typedef struct tySequence__4CoKBAViiN2VV33Ov2SWmA_Content tySequence__4CoKBAViiN2VV33Ov2SWmA_Content;
typedef struct NimStrPayload NimStrPayload;
typedef struct NimStringV2 NimStringV2;
typedef struct tyObject_Table__i55W8RrwGKsG9cl0sAKxgkQ tyObject_Table__i55W8RrwGKsG9cl0sAKxgkQ;
typedef struct tySequence__pUxI6Ljo6IKKHXKOZkQ7Og tySequence__pUxI6Ljo6IKKHXKOZkQ7Og;
typedef struct tySequence__pUxI6Ljo6IKKHXKOZkQ7Og_Content tySequence__pUxI6Ljo6IKKHXKOZkQ7Og_Content;
typedef struct tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA;
typedef struct tySequence__qwqHTkRvwhrRyENtudHQ7g tySequence__qwqHTkRvwhrRyENtudHQ7g;
typedef struct tySequence__qwqHTkRvwhrRyENtudHQ7g_Content tySequence__qwqHTkRvwhrRyENtudHQ7g_Content;
typedef struct tySequence__shxop0zPIs5Ec3k71aCLuQ tySequence__shxop0zPIs5Ec3k71aCLuQ;
typedef struct tySequence__shxop0zPIs5Ec3k71aCLuQ_Content tySequence__shxop0zPIs5Ec3k71aCLuQ_Content;
typedef struct tyObject_Smsrd__HK3j7rpjuYY9amQl7YxkoaA tyObject_Smsrd__HK3j7rpjuYY9amQl7YxkoaA;
typedef struct tyObject_Item__T8diAqAiCs9bhc5T1iInskQ tyObject_Item__T8diAqAiCs9bhc5T1iInskQ;
typedef struct tyTuple__sr3s7uVHpu9cEbbDnCSg8yQ tyTuple__sr3s7uVHpu9cEbbDnCSg8yQ;

/* section: NIM_merge_TYPES */
struct tySequence__4CoKBAViiN2VV33Ov2SWmA {
  NI len; tySequence__4CoKBAViiN2VV33Ov2SWmA_Content* p;
};
struct NimStrPayload {
NI cap;
NIM_CHAR data[SEQ_DECL_SIZE];
};
struct NimStringV2 {
NI len;
NimStrPayload* p;
};
struct tySequence__pUxI6Ljo6IKKHXKOZkQ7Og {
  NI len; tySequence__pUxI6Ljo6IKKHXKOZkQ7Og_Content* p;
};
struct tyObject_Table__i55W8RrwGKsG9cl0sAKxgkQ {
tySequence__pUxI6Ljo6IKKHXKOZkQ7Og data;
NI counter;
};
struct tySequence__qwqHTkRvwhrRyENtudHQ7g {
  NI len; tySequence__qwqHTkRvwhrRyENtudHQ7g_Content* p;
};
struct tySequence__shxop0zPIs5Ec3k71aCLuQ {
  NI len; tySequence__shxop0zPIs5Ec3k71aCLuQ_Content* p;
};
struct tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA {
tySequence__qwqHTkRvwhrRyENtudHQ7g data;
tySequence__shxop0zPIs5Ec3k71aCLuQ modified;
};
struct tyObject_Smsrd__HK3j7rpjuYY9amQl7YxkoaA {
NI x;
NI y;
};
struct tyObject_Item__T8diAqAiCs9bhc5T1iInskQ {
NI startA;
NI startB;
NI deletedA;
NI insertedB;
};


#ifndef tySequence__4CoKBAViiN2VV33Ov2SWmA_Content_PP
#define tySequence__4CoKBAViiN2VV33Ov2SWmA_Content_PP
struct tySequence__4CoKBAViiN2VV33Ov2SWmA_Content { NI cap; tyObject_Item__T8diAqAiCs9bhc5T1iInskQ data[SEQ_DECL_SIZE];};
#endif

      struct tyTuple__sr3s7uVHpu9cEbbDnCSg8yQ {
NI Field0;
NimStringV2 Field1;
NI Field2;
};


#ifndef tySequence__pUxI6Ljo6IKKHXKOZkQ7Og_Content_PP
#define tySequence__pUxI6Ljo6IKKHXKOZkQ7Og_Content_PP
struct tySequence__pUxI6Ljo6IKKHXKOZkQ7Og_Content { NI cap; tyTuple__sr3s7uVHpu9cEbbDnCSg8yQ data[SEQ_DECL_SIZE];};
#endif

      

#ifndef tySequence__qwqHTkRvwhrRyENtudHQ7g_Content_PP
#define tySequence__qwqHTkRvwhrRyENtudHQ7g_Content_PP
struct tySequence__qwqHTkRvwhrRyENtudHQ7g_Content { NI cap; NI data[SEQ_DECL_SIZE];};
#endif

      

#ifndef tySequence__shxop0zPIs5Ec3k71aCLuQ_Content_PP
#define tySequence__shxop0zPIs5Ec3k71aCLuQ_Content_PP
struct tySequence__shxop0zPIs5Ec3k71aCLuQ_Content { NI cap; NIM_BOOL data[SEQ_DECL_SIZE];};
#endif

      

#ifndef tySequence__qwqHTkRvwhrRyENtudHQ7g_Content_PP
#define tySequence__qwqHTkRvwhrRyENtudHQ7g_Content_PP
struct tySequence__qwqHTkRvwhrRyENtudHQ7g_Content { NI cap; NI data[SEQ_DECL_SIZE];};
#endif

      

#ifndef tySequence__shxop0zPIs5Ec3k71aCLuQ_Content_PP
#define tySequence__shxop0zPIs5Ec3k71aCLuQ_Content_PP
struct tySequence__shxop0zPIs5Ec3k71aCLuQ_Content { NI cap; NIM_BOOL data[SEQ_DECL_SIZE];};
#endif

      

#ifndef tySequence__4CoKBAViiN2VV33Ov2SWmA_Content_PP
#define tySequence__4CoKBAViiN2VV33Ov2SWmA_Content_PP
struct tySequence__4CoKBAViiN2VV33Ov2SWmA_Content { NI cap; tyObject_Item__T8diAqAiCs9bhc5T1iInskQ data[SEQ_DECL_SIZE];};
#endif

      
/* section: NIM_merge_PROC_HEADERS */
static N_INLINE(void, nimZeroMem)(void* p, NI size);
static N_INLINE(void, nimSetMem__zxfKBYntu9cBapkhrCOk1fgmemory)(void* a, int v, NI size);
N_LIB_PRIVATE N_NIMCALL(tyObject_Table__i55W8RrwGKsG9cl0sAKxgkQ, initTable__RrWZeIMfwjxuENvIG9aHB8g)(NI initialSize);
N_LIB_PRIVATE N_NIMCALL(tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA, diffCodes__bj4IfabQ1i8aXAFJt6wTIQ)(NimStringV2 aText, tyObject_Table__i55W8RrwGKsG9cl0sAKxgkQ* h);
N_LIB_PRIVATE N_NIMCALL(NI, len__Zznl29aXDrD6SwhrugG3NyA)(tyObject_Table__i55W8RrwGKsG9cl0sAKxgkQ t);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___bzcjBFFzjz1bAdldi4TUbw)(tySequence__qwqHTkRvwhrRyENtudHQ7g* dest, tySequence__qwqHTkRvwhrRyENtudHQ7g src);
N_LIB_PRIVATE N_NIMCALL(tySequence__qwqHTkRvwhrRyENtudHQ7g, newSeq__eA9b5cYyFZe7gRm4F9aRTKlA)(NI len);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___aBBXmHFBEivKqERloP6zmA)(NimStringV2* dest, NimStringV2 src);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, substr__2yh9cer0ymNRHlOOg8P7IuA)(NimStringV2 s, NI first, NI last);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, contains__aOI3jq5GpcZWNc9aNWt3Shw)(tyObject_Table__i55W8RrwGKsG9cl0sAKxgkQ t, NimStringV2 key);
N_LIB_PRIVATE N_NIMCALL(void, add__MIAbjRZGBQlNfywJeCn8AQ)(tySequence__qwqHTkRvwhrRyENtudHQ7g* x, NI value);
N_LIB_PRIVATE N_NIMCALL(NI*, X5BX5D___UtkVeTv4Q8MPC5159bNq7dw)(tyObject_Table__i55W8RrwGKsG9cl0sAKxgkQ* t, NimStringV2 key);
N_LIB_PRIVATE N_NIMCALL(void, X5BX5Deq___HfxZpUfki4UkuP38hbwROA)(tyObject_Table__i55W8RrwGKsG9cl0sAKxgkQ* t, NimStringV2 key, NI val);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ)(NimStringV2* dest);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___iiRMvZs3suc4QGDpzdlDSQ)(tySequence__shxop0zPIs5Ec3k71aCLuQ* dest, tySequence__shxop0zPIs5Ec3k71aCLuQ src);
N_LIB_PRIVATE N_NIMCALL(tySequence__shxop0zPIs5Ec3k71aCLuQ, newSeq__U5V382ej7wXp4NiZ9bGeoQQ)(NI len);
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void);
N_LIB_PRIVATE N_NIMCALL(void, clear__VYLD6MqB59amU6bk9ahC8zNw_2)(tyObject_Table__i55W8RrwGKsG9cl0sAKxgkQ* t);
static N_INLINE(NI, len__o7VhyDUugDuGyG9axgVfS6Qdiff)(tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA* d);
N_LIB_PRIVATE N_NIMCALL(void, lcs__1Y0zJGDNLi50R9bMO8nW6Eg)(tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA* dataA, NI lowerA, NI upperA, tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA* dataB, NI lowerB, NI upperB, NI* downVector, NI downVectorLen_0, NI* upVector, NI upVectorLen_0);
N_LIB_PRIVATE N_NIMCALL(tyObject_Smsrd__HK3j7rpjuYY9amQl7YxkoaA, sms__nqz0neVKEAoytnLzHeNcrg)(tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA* dataA, NI lowerA, NI upperA, tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA* dataB, NI lowerB, NI upperB, NI* downVector, NI downVectorLen_0, NI* upVector, NI upVectorLen_0);
N_LIB_PRIVATE N_NIMCALL(void, optimize__eeudQqKpsCGADmehoyDrGg)(tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA* data);
N_LIB_PRIVATE N_NIMCALL(tySequence__4CoKBAViiN2VV33Ov2SWmA, createDiffs__0TnXdQ7QHEzi9a9cCvrMrLDw)(tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA* dataA, tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA* dataB);
N_LIB_PRIVATE N_NIMCALL(void, add__AYssNOWUJMJCw80v9b5evwA)(tySequence__4CoKBAViiN2VV33Ov2SWmA* x, tyObject_Item__T8diAqAiCs9bhc5T1iInskQ* value);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___SAcH79b5ZePfUS16V9akl1gA)(tySequence__qwqHTkRvwhrRyENtudHQ7g* dest);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___dmZnuXPaxyPyWuhqtARb9cQ)(tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA* dest);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___RL9bg6A7JyysH3X5GKEINTw)(tySequence__shxop0zPIs5Ec3k71aCLuQ* dest);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___lwIu9ceDEO2io3r6Dd2R1qw)(tyObject_Table__i55W8RrwGKsG9cl0sAKxgkQ* dest);
N_LIB_PRIVATE N_NOCONV(void, deallocShared)(void* p);

/* section: NIM_merge_VARS */
extern NIM_BOOL nimInErrorMode__759bT87luu8XGcbkw13FUjA;

/* section: NIM_merge_PROCS */
static N_INLINE(void, nimSetMem__zxfKBYntu9cBapkhrCOk1fgmemory)(void* a, int v, NI size) {
	void* T1_;
	T1_ = (void*)0;
	T1_ = memset(a, v, ((size_t) (size)));
}
static N_INLINE(void, nimZeroMem)(void* p, NI size) {
	nimSetMem__zxfKBYntu9cBapkhrCOk1fgmemory(p, ((int) 0), size);
}
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void) {
	NIM_BOOL* result;
	result = (NIM_BOOL*)0;
	result = (&nimInErrorMode__759bT87luu8XGcbkw13FUjA);
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA, diffCodes__bj4IfabQ1i8aXAFJt6wTIQ)(NimStringV2 aText, tyObject_Table__i55W8RrwGKsG9cl0sAKxgkQ* h) {
	tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA result;
	NI lastUsedCode;
	tySequence__qwqHTkRvwhrRyENtudHQ7g T1_;
	NI T47_;
	tySequence__shxop0zPIs5Ec3k71aCLuQ T48_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)(&result), sizeof(tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA));
	lastUsedCode = len__Zznl29aXDrD6SwhrugG3NyA((*h));
	T1_.len = 0; T1_.p = NIM_NIL;
	T1_ = newSeq__eA9b5cYyFZe7gRm4F9aRTKlA(((NI) 0));
	eqsink___bzcjBFFzjz1bAdldi4TUbw((&result.data), T1_);
	{
		NimStringV2 s;
		NI first;
		NI last;
		NI eolpos;
		s.len = 0; s.p = NIM_NIL;
		first = ((NI) 0);
		last = ((NI) 0);
		eolpos = ((NI) 0);
		{
			while (1) {
				NI colontmpD_;
				NI colontmpD__2;
				NI T27_;
				NimStringV2 T33_;
				colontmpD_ = (NI)0;
				colontmpD__2 = (NI)0;
				{
					while (1) {
						NIM_BOOL T8_;
						T8_ = (NIM_BOOL)0;
						T8_ = (last < aText.len);
						if (!(T8_)) goto LA9_;
						T8_ = !((((NU8)(aText.p->data[last])) == ((NU8)(13)) || ((NU8)(aText.p->data[last])) == ((NU8)(10))));
						LA9_: ;
						if (!T8_) goto LA7;
						last += ((NI) 1);
					} LA7: ;
				}
				eolpos = last;
				{
					if (!(last < aText.len)) goto LA12_;
					{
						if (!((NU8)(aText.p->data[last]) == (NU8)(10))) goto LA16_;
						last += ((NI) 1);
					}
					goto LA14_;
					LA16_: ;
					{
						if (!((NU8)(aText.p->data[last]) == (NU8)(13))) goto LA19_;
						last += ((NI) 1);
						{
							NIM_BOOL T23_;
							T23_ = (NIM_BOOL)0;
							T23_ = (last < aText.len);
							if (!(T23_)) goto LA24_;
							T23_ = ((NU8)(aText.p->data[last]) == (NU8)(10));
							LA24_: ;
							if (!T23_) goto LA25_;
							last += ((NI) 1);
						}
						LA25_: ;
					}
					goto LA14_;
					LA19_: ;
					LA14_: ;
				}
				LA12_: ;
				T27_ = (NI)0;
				{
					if (!NIM_FALSE) goto LA30_;
					colontmpD_ = (NI)(last - ((NI) 1));
					T27_ = colontmpD_;
				}
				goto LA28_;
				LA30_: ;
				{
					colontmpD__2 = (NI)(eolpos - ((NI) 1));
					T27_ = colontmpD__2;
				}
				LA28_: ;
				T33_.len = 0; T33_.p = NIM_NIL;
				T33_ = substr__2yh9cer0ymNRHlOOg8P7IuA(aText, first, T27_);
				eqsink___aBBXmHFBEivKqERloP6zmA((&s), T33_);
				{
					NIM_BOOL T36_;
					NI colontmpD__3;
					NI* T39_;
					T36_ = (NIM_BOOL)0;
					T36_ = contains__aOI3jq5GpcZWNc9aNWt3Shw((*h), s);
					if (!T36_) goto LA37_;
					colontmpD__3 = (NI)0;
					T39_ = (NI*)0;
					T39_ = X5BX5D___UtkVeTv4Q8MPC5159bNq7dw(h, s);
					if (NIM_UNLIKELY(*nimErr_)) goto LA3_;
					colontmpD__3 = (*T39_);
					add__MIAbjRZGBQlNfywJeCn8AQ((&result.data), colontmpD__3);
				}
				goto LA34_;
				LA37_: ;
				{
					NI colontmpD__4;
					NimStringV2 blitTmp;
					colontmpD__4 = (NI)0;
					lastUsedCode += ((NI) 1);
					blitTmp = s;
					s.len = 0; s.p = NIM_NIL;
					X5BX5Deq___HfxZpUfki4UkuP38hbwROA(h, blitTmp, lastUsedCode);
					colontmpD__4 = lastUsedCode;
					add__MIAbjRZGBQlNfywJeCn8AQ((&result.data), colontmpD__4);
				}
				LA34_: ;
				{
					if (!(eolpos == last)) goto LA43_;
					goto LA4;
				}
				LA43_: ;
				first = last;
			}
		} LA4: ;
		{
			LA3_:;
		}
		{
			eqdestroy___dS1BF3Vxjg9aJMmmhVJKSpQ((&s));
		}
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	T47_ = result.data.len;
	T48_.len = 0; T48_.p = NIM_NIL;
	T48_ = newSeq__U5V382ej7wXp4NiZ9bGeoQQ(((NI) ((NI)(T47_ + ((NI) 2)))));
	eqsink___iiRMvZs3suc4QGDpzdlDSQ((&result.modified), T48_);
	}BeforeRet_: ;
	return result;
}
static N_INLINE(NI, len__o7VhyDUugDuGyG9axgVfS6Qdiff)(tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA* d) {
	NI result;
	NI T1_;
	result = (NI)0;
	T1_ = (*d).data.len;
	result = T1_;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_Smsrd__HK3j7rpjuYY9amQl7YxkoaA, sms__nqz0neVKEAoytnLzHeNcrg)(tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA* dataA, NI lowerA, NI upperA, tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA* dataB, NI lowerB, NI upperB, NI* downVector, NI downVectorLen_0, NI* upVector, NI upVectorLen_0) {
	tyObject_Smsrd__HK3j7rpjuYY9amQl7YxkoaA result;
	NI max;
	NI T1_;
	NI T2_;
	NI downK;
	NI upK;
	NI delta;
	NIM_BOOL oddDelta;
	NI downOffset;
	NI upOffset;
	NI maxD;
{	nimZeroMem((void*)(&result), sizeof(tyObject_Smsrd__HK3j7rpjuYY9amQl7YxkoaA));
	T1_ = (NI)0;
	T1_ = len__o7VhyDUugDuGyG9axgVfS6Qdiff((&(*dataA)));
	T2_ = (NI)0;
	T2_ = len__o7VhyDUugDuGyG9axgVfS6Qdiff(dataB);
	max = (NI)((NI)(T1_ + T2_) + ((NI) 1));
	downK = (NI)(lowerA - lowerB);
	upK = (NI)(upperA - upperB);
	delta = (NI)((NI)(upperA - lowerA) - (NI)(upperB - lowerB));
	oddDelta = !(((NI)(delta & ((NI) 1)) == ((NI) 0)));
	downOffset = (NI)(max - downK);
	upOffset = (NI)(max - upK);
	maxD = (NI)((NI)((NI)((NI)((NI)(upperA - lowerA) + upperB) - lowerB) / ((NI) 2)) + ((NI) 1));
	downVector[(NI)((NI)(downOffset + downK) + ((NI) 1))] = lowerA;
	upVector[(NI)((NI)(upOffset + upK) - ((NI) 1))] = upperA;
	{
		NI D;
		NI res;
		D = (NI)0;
		res = ((NI) 0);
		{
			while (1) {
				if (!(res <= maxD)) goto LA5;
				D = res;
				{
					NI k;
					NI colontmp_;
					NI colontmp__2;
					NI res_2;
					k = (NI)0;
					colontmp_ = (NI)0;
					colontmp__2 = (NI)0;
					colontmp_ = (NI)(downK - D);
					colontmp__2 = (NI)(downK + D);
					res_2 = colontmp_;
					{
						while (1) {
							NI x;
							NI y;
							if (!(res_2 <= colontmp__2)) goto LA8;
							k = res_2;
							x = (NI)0;
							{
								if (!(k == (NI)(downK - D))) goto LA11_;
								x = downVector[(NI)((NI)(downOffset + k) + ((NI) 1))];
							}
							goto LA9_;
							LA11_: ;
							{
								x = (NI)(downVector[(NI)((NI)(downOffset + k) - ((NI) 1))] + ((NI) 1));
								{
									NIM_BOOL T16_;
									T16_ = (NIM_BOOL)0;
									T16_ = (k < (NI)(downK + D));
									if (!(T16_)) goto LA17_;
									T16_ = (x <= downVector[(NI)((NI)(downOffset + k) + ((NI) 1))]);
									LA17_: ;
									if (!T16_) goto LA18_;
									x = downVector[(NI)((NI)(downOffset + k) + ((NI) 1))];
								}
								LA18_: ;
							}
							LA9_: ;
							y = (NI)(x - k);
							{
								while (1) {
									NIM_BOOL T22_;
									NIM_BOOL T23_;
									T22_ = (NIM_BOOL)0;
									T23_ = (NIM_BOOL)0;
									T23_ = (x < upperA);
									if (!(T23_)) goto LA24_;
									T23_ = (y < upperB);
									LA24_: ;
									T22_ = T23_;
									if (!(T22_)) goto LA25_;
									T22_ = ((*dataA).data.p->data[x] == (*dataB).data.p->data[y]);
									LA25_: ;
									if (!T22_) goto LA21;
									x += ((NI) 1);
									y += ((NI) 1);
								} LA21: ;
							}
							downVector[(NI)(downOffset + k)] = x;
							{
								NIM_BOOL T28_;
								NIM_BOOL T29_;
								T28_ = (NIM_BOOL)0;
								T29_ = (NIM_BOOL)0;
								T29_ = oddDelta;
								if (!(T29_)) goto LA30_;
								T29_ = ((NI)(upK - D) < k);
								LA30_: ;
								T28_ = T29_;
								if (!(T28_)) goto LA31_;
								T28_ = (k < (NI)(upK + D));
								LA31_: ;
								if (!T28_) goto LA32_;
								{
									NI colontmpD_;
									if (!(upVector[(NI)(upOffset + k)] <= downVector[(NI)(downOffset + k)])) goto LA36_;
									colontmpD_ = (NI)0;
									nimZeroMem((void*)(&result), sizeof(tyObject_Smsrd__HK3j7rpjuYY9amQl7YxkoaA));
									colontmpD_ = downVector[(NI)(downOffset + k)];
									result.x = colontmpD_;
									result.y = (NI)(downVector[(NI)(downOffset + k)] - k);
									goto BeforeRet_;
								}
								LA36_: ;
							}
							LA32_: ;
							res_2 += ((NI) 2);
						} LA8: ;
					}
				}
				{
					NI k_2;
					NI colontmp__3;
					NI colontmp__4;
					NI res_3;
					k_2 = (NI)0;
					colontmp__3 = (NI)0;
					colontmp__4 = (NI)0;
					colontmp__3 = (NI)(upK - D);
					colontmp__4 = (NI)(upK + D);
					res_3 = colontmp__3;
					{
						while (1) {
							NI x_2;
							NI y_2;
							if (!(res_3 <= colontmp__4)) goto LA40;
							k_2 = res_3;
							x_2 = (NI)0;
							{
								if (!(k_2 == (NI)(upK + D))) goto LA43_;
								x_2 = upVector[(NI)((NI)(upOffset + k_2) - ((NI) 1))];
							}
							goto LA41_;
							LA43_: ;
							{
								x_2 = (NI)(upVector[(NI)((NI)(upOffset + k_2) + ((NI) 1))] - ((NI) 1));
								{
									NIM_BOOL T48_;
									T48_ = (NIM_BOOL)0;
									T48_ = ((NI)(upK - D) < k_2);
									if (!(T48_)) goto LA49_;
									T48_ = (upVector[(NI)((NI)(upOffset + k_2) - ((NI) 1))] < x_2);
									LA49_: ;
									if (!T48_) goto LA50_;
									x_2 = upVector[(NI)((NI)(upOffset + k_2) - ((NI) 1))];
								}
								LA50_: ;
							}
							LA41_: ;
							y_2 = (NI)(x_2 - k_2);
							{
								while (1) {
									NIM_BOOL T54_;
									NIM_BOOL T55_;
									T54_ = (NIM_BOOL)0;
									T55_ = (NIM_BOOL)0;
									T55_ = (lowerA < x_2);
									if (!(T55_)) goto LA56_;
									T55_ = (lowerB < y_2);
									LA56_: ;
									T54_ = T55_;
									if (!(T54_)) goto LA57_;
									T54_ = ((*dataA).data.p->data[(NI)(x_2 - ((NI) 1))] == (*dataB).data.p->data[(NI)(y_2 - ((NI) 1))]);
									LA57_: ;
									if (!T54_) goto LA53;
									x_2 -= ((NI) 1);
									y_2 -= ((NI) 1);
								} LA53: ;
							}
							upVector[(NI)(upOffset + k_2)] = x_2;
							{
								NIM_BOOL T60_;
								NIM_BOOL T61_;
								T60_ = (NIM_BOOL)0;
								T61_ = (NIM_BOOL)0;
								T61_ = !(oddDelta);
								if (!(T61_)) goto LA62_;
								T61_ = ((NI)(downK - D) <= k_2);
								LA62_: ;
								T60_ = T61_;
								if (!(T60_)) goto LA63_;
								T60_ = (k_2 <= (NI)(downK + D));
								LA63_: ;
								if (!T60_) goto LA64_;
								{
									NI colontmpD__2;
									if (!(upVector[(NI)(upOffset + k_2)] <= downVector[(NI)(downOffset + k_2)])) goto LA68_;
									colontmpD__2 = (NI)0;
									nimZeroMem((void*)(&result), sizeof(tyObject_Smsrd__HK3j7rpjuYY9amQl7YxkoaA));
									colontmpD__2 = downVector[(NI)(downOffset + k_2)];
									result.x = colontmpD__2;
									result.y = (NI)(downVector[(NI)(downOffset + k_2)] - k_2);
									goto BeforeRet_;
								}
								LA68_: ;
							}
							LA64_: ;
							res_3 += ((NI) 2);
						} LA40: ;
					}
				}
				res += ((NI) 1);
			} LA5: ;
		}
	}
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, lcs__1Y0zJGDNLi50R9bMO8nW6Eg)(tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA* dataA, NI lowerA, NI upperA, tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA* dataB, NI lowerB, NI upperB, NI* downVector, NI downVectorLen_0, NI* upVector, NI upVectorLen_0) {
	NI lowerA_2;
	NI lowerB_2;
	NI upperA_2;
	NI upperB_2;
	lowerA_2 = lowerA;
	lowerB_2 = lowerB;
	upperA_2 = upperA;
	upperB_2 = upperB;
	{
		while (1) {
			NIM_BOOL T3_;
			NIM_BOOL T4_;
			T3_ = (NIM_BOOL)0;
			T4_ = (NIM_BOOL)0;
			T4_ = (lowerA_2 < upperA_2);
			if (!(T4_)) goto LA5_;
			T4_ = (lowerB_2 < upperB_2);
			LA5_: ;
			T3_ = T4_;
			if (!(T3_)) goto LA6_;
			T3_ = ((*dataA).data.p->data[lowerA_2] == (*dataB).data.p->data[lowerB_2]);
			LA6_: ;
			if (!T3_) goto LA2;
			lowerA_2 += ((NI) 1);
			lowerB_2 += ((NI) 1);
		} LA2: ;
	}
	{
		while (1) {
			NIM_BOOL T9_;
			NIM_BOOL T10_;
			T9_ = (NIM_BOOL)0;
			T10_ = (NIM_BOOL)0;
			T10_ = (lowerA_2 < upperA_2);
			if (!(T10_)) goto LA11_;
			T10_ = (lowerB_2 < upperB_2);
			LA11_: ;
			T9_ = T10_;
			if (!(T9_)) goto LA12_;
			T9_ = ((*dataA).data.p->data[(NI)(upperA_2 - ((NI) 1))] == (*dataB).data.p->data[(NI)(upperB_2 - ((NI) 1))]);
			LA12_: ;
			if (!T9_) goto LA8;
			upperA_2 -= ((NI) 1);
			upperB_2 -= ((NI) 1);
		} LA8: ;
	}
	{
		if (!(lowerA_2 == upperA_2)) goto LA15_;
		{
			while (1) {
				if (!(lowerB_2 < upperB_2)) goto LA18;
				(*dataB).modified.p->data[lowerB_2] = NIM_TRUE;
				lowerB_2 += ((NI) 1);
			} LA18: ;
		}
	}
	goto LA13_;
	LA15_: ;
	{
		if (!(lowerB_2 == upperB_2)) goto LA20_;
		{
			while (1) {
				if (!(lowerA_2 < upperA_2)) goto LA23;
				(*dataA).modified.p->data[lowerA_2] = NIM_TRUE;
				lowerA_2 += ((NI) 1);
			} LA23: ;
		}
	}
	goto LA13_;
	LA20_: ;
	{
		tyObject_Smsrd__HK3j7rpjuYY9amQl7YxkoaA smsrd;
		smsrd = sms__nqz0neVKEAoytnLzHeNcrg(dataA, lowerA_2, upperA_2, (&(*dataB)), lowerB_2, upperB_2, downVector, downVectorLen_0, upVector, upVectorLen_0);
		lcs__1Y0zJGDNLi50R9bMO8nW6Eg(dataA, lowerA_2, smsrd.x, dataB, lowerB_2, smsrd.y, downVector, downVectorLen_0, upVector, upVectorLen_0);
		lcs__1Y0zJGDNLi50R9bMO8nW6Eg(dataA, smsrd.x, upperA_2, dataB, smsrd.y, upperB_2, downVector, downVectorLen_0, upVector, upVectorLen_0);
	}
	LA13_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, optimize__eeudQqKpsCGADmehoyDrGg)(tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA* data) {
	NI startPos;
	startPos = ((NI) 0);
	{
		while (1) {
			NI T3_;
			NI endPos;
			T3_ = (NI)0;
			T3_ = len__o7VhyDUugDuGyG9axgVfS6Qdiff((&(*data)));
			if (!(startPos < T3_)) goto LA2;
			{
				while (1) {
					NIM_BOOL T6_;
					NI T7_;
					T6_ = (NIM_BOOL)0;
					T7_ = (NI)0;
					T7_ = len__o7VhyDUugDuGyG9axgVfS6Qdiff((&(*data)));
					T6_ = (startPos < T7_);
					if (!(T6_)) goto LA8_;
					T6_ = !((*data).modified.p->data[startPos]);
					LA8_: ;
					if (!T6_) goto LA5;
					startPos += ((NI) 1);
				} LA5: ;
			}
			endPos = startPos;
			{
				while (1) {
					NIM_BOOL T11_;
					NI T12_;
					T11_ = (NIM_BOOL)0;
					T12_ = (NI)0;
					T12_ = len__o7VhyDUugDuGyG9axgVfS6Qdiff((&(*data)));
					T11_ = (endPos < T12_);
					if (!(T11_)) goto LA13_;
					T11_ = (*data).modified.p->data[endPos];
					LA13_: ;
					if (!T11_) goto LA10;
					endPos += ((NI) 1);
				} LA10: ;
			}
			{
				NIM_BOOL T16_;
				NI T17_;
				T16_ = (NIM_BOOL)0;
				T17_ = (NI)0;
				T17_ = len__o7VhyDUugDuGyG9axgVfS6Qdiff((&(*data)));
				T16_ = (endPos < T17_);
				if (!(T16_)) goto LA18_;
				T16_ = ((*data).data.p->data[startPos] == (*data).data.p->data[endPos]);
				LA18_: ;
				if (!T16_) goto LA19_;
				(*data).modified.p->data[startPos] = NIM_FALSE;
				(*data).modified.p->data[endPos] = NIM_TRUE;
			}
			goto LA14_;
			LA19_: ;
			{
				startPos = endPos;
			}
			LA14_: ;
		} LA2: ;
	}
}
N_LIB_PRIVATE N_NIMCALL(tySequence__4CoKBAViiN2VV33Ov2SWmA, createDiffs__0TnXdQ7QHEzi9a9cCvrMrLDw)(tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA* dataA, tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA* dataB) {
	tySequence__4CoKBAViiN2VV33Ov2SWmA result;
	NI startA;
	NI startB;
	NI lineA;
	NI lineB;
	result.len = 0; result.p = NIM_NIL;
	startA = ((NI) 0);
	startB = ((NI) 0);
	lineA = ((NI) 0);
	lineB = ((NI) 0);
	{
		while (1) {
			NIM_BOOL T3_;
			NI T4_;
			NI T6_;
			T3_ = (NIM_BOOL)0;
			T4_ = (NI)0;
			T4_ = len__o7VhyDUugDuGyG9axgVfS6Qdiff(dataA);
			T3_ = (lineA < T4_);
			if (T3_) goto LA5_;
			T6_ = (NI)0;
			T6_ = len__o7VhyDUugDuGyG9axgVfS6Qdiff(dataB);
			T3_ = (lineB < T6_);
			LA5_: ;
			if (!T3_) goto LA2;
			{
				NIM_BOOL T9_;
				NIM_BOOL T10_;
				NIM_BOOL T11_;
				NI T12_;
				NI T15_;
				T9_ = (NIM_BOOL)0;
				T10_ = (NIM_BOOL)0;
				T11_ = (NIM_BOOL)0;
				T12_ = (NI)0;
				T12_ = len__o7VhyDUugDuGyG9axgVfS6Qdiff(dataA);
				T11_ = (lineA < T12_);
				if (!(T11_)) goto LA13_;
				T11_ = !((*dataA).modified.p->data[lineA]);
				LA13_: ;
				T10_ = T11_;
				if (!(T10_)) goto LA14_;
				T15_ = (NI)0;
				T15_ = len__o7VhyDUugDuGyG9axgVfS6Qdiff(dataB);
				T10_ = (lineB < T15_);
				LA14_: ;
				T9_ = T10_;
				if (!(T9_)) goto LA16_;
				T9_ = !((*dataB).modified.p->data[lineB]);
				LA16_: ;
				if (!T9_) goto LA17_;
				lineA += ((NI) 1);
				lineB += ((NI) 1);
			}
			goto LA7_;
			LA17_: ;
			{
				startA = lineA;
				startB = lineB;
				{
					while (1) {
						NIM_BOOL T22_;
						NI T23_;
						NIM_BOOL T25_;
						NI T26_;
						T22_ = (NIM_BOOL)0;
						T23_ = (NI)0;
						T23_ = len__o7VhyDUugDuGyG9axgVfS6Qdiff(dataA);
						T22_ = (lineA < T23_);
						if (!(T22_)) goto LA24_;
						T25_ = (NIM_BOOL)0;
						T26_ = (NI)0;
						T26_ = len__o7VhyDUugDuGyG9axgVfS6Qdiff(dataB);
						T25_ = (T26_ <= lineB);
						if (T25_) goto LA27_;
						T25_ = (*dataA).modified.p->data[lineA];
						LA27_: ;
						T22_ = T25_;
						LA24_: ;
						if (!T22_) goto LA21;
						lineA += ((NI) 1);
					} LA21: ;
				}
				{
					while (1) {
						NIM_BOOL T30_;
						NI T31_;
						NIM_BOOL T33_;
						NI T34_;
						T30_ = (NIM_BOOL)0;
						T31_ = (NI)0;
						T31_ = len__o7VhyDUugDuGyG9axgVfS6Qdiff(dataB);
						T30_ = (lineB < T31_);
						if (!(T30_)) goto LA32_;
						T33_ = (NIM_BOOL)0;
						T34_ = (NI)0;
						T34_ = len__o7VhyDUugDuGyG9axgVfS6Qdiff(dataA);
						T33_ = (T34_ <= lineA);
						if (T33_) goto LA35_;
						T33_ = (*dataB).modified.p->data[lineB];
						LA35_: ;
						T30_ = T33_;
						LA32_: ;
						if (!T30_) goto LA29;
						lineB += ((NI) 1);
					} LA29: ;
				}
				{
					NIM_BOOL T38_;
					NI colontmpD_;
					NI colontmpD__2;
					tyObject_Item__T8diAqAiCs9bhc5T1iInskQ T42_;
					T38_ = (NIM_BOOL)0;
					T38_ = (startA < lineA);
					if (T38_) goto LA39_;
					T38_ = (startB < lineB);
					LA39_: ;
					if (!T38_) goto LA40_;
					colontmpD_ = (NI)0;
					colontmpD__2 = (NI)0;
					nimZeroMem((void*)(&T42_), sizeof(tyObject_Item__T8diAqAiCs9bhc5T1iInskQ));
					colontmpD_ = startA;
					T42_.startA = colontmpD_;
					colontmpD__2 = startB;
					T42_.startB = colontmpD__2;
					T42_.deletedA = (NI)(lineA - startA);
					T42_.insertedB = (NI)(lineB - startB);
					add__AYssNOWUJMJCw80v9b5evwA((&result), (&T42_));
				}
				LA40_: ;
			}
			LA7_: ;
		} LA2: ;
	}
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___dmZnuXPaxyPyWuhqtARb9cQ)(tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA* dest) {
	eqdestroy___SAcH79b5ZePfUS16V9akl1gA((&(*dest).data));
	eqdestroy___RL9bg6A7JyysH3X5GKEINTw((&(*dest).modified));
}
N_LIB_PRIVATE N_NIMCALL(tySequence__4CoKBAViiN2VV33Ov2SWmA, diffText__N3nD9arGGt9aXEjAYAYs9aSFA)(NimStringV2 textA, NimStringV2 textB) {
	tySequence__4CoKBAViiN2VV33Ov2SWmA result;
	tyObject_Table__i55W8RrwGKsG9cl0sAKxgkQ h;
	tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA dataA;
	tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA dataB;
	tySequence__qwqHTkRvwhrRyENtudHQ7g downVector;
	tySequence__qwqHTkRvwhrRyENtudHQ7g upVector;
	NI max;
	NI T2_;
	NI T3_;
	NI T4_;
	NI T5_;
	NI T6_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result.len = 0; result.p = NIM_NIL;
	nimZeroMem((void*)(&h), sizeof(tyObject_Table__i55W8RrwGKsG9cl0sAKxgkQ));
	nimZeroMem((void*)(&dataA), sizeof(tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA));
	nimZeroMem((void*)(&dataB), sizeof(tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA));
	downVector.len = 0; downVector.p = NIM_NIL;
	upVector.len = 0; upVector.p = NIM_NIL;
	h = initTable__RrWZeIMfwjxuENvIG9aHB8g(((NI) 32));
	dataA = diffCodes__bj4IfabQ1i8aXAFJt6wTIQ(textA, (&h));
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	dataB = diffCodes__bj4IfabQ1i8aXAFJt6wTIQ(textB, (&h));
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	clear__VYLD6MqB59amU6bk9ahC8zNw_2((&h));
	T2_ = (NI)0;
	T2_ = len__o7VhyDUugDuGyG9axgVfS6Qdiff((&dataA));
	T3_ = (NI)0;
	T3_ = len__o7VhyDUugDuGyG9axgVfS6Qdiff((&dataB));
	max = (NI)((NI)(T2_ + T3_) + ((NI) 1));
	downVector = newSeq__eA9b5cYyFZe7gRm4F9aRTKlA(((NI) ((NI)((NI)(((NI) 2) * max) + ((NI) 2)))));
	upVector = newSeq__eA9b5cYyFZe7gRm4F9aRTKlA(((NI) ((NI)((NI)(((NI) 2) * max) + ((NI) 2)))));
	T4_ = (NI)0;
	T4_ = len__o7VhyDUugDuGyG9axgVfS6Qdiff((&dataA));
	T5_ = (NI)0;
	T5_ = T4_;
	T6_ = (NI)0;
	T6_ = len__o7VhyDUugDuGyG9axgVfS6Qdiff((&dataB));
	lcs__1Y0zJGDNLi50R9bMO8nW6Eg((&dataA), ((NI) 0), T5_, (&dataB), ((NI) 0), T6_, downVector.p->data, downVector.len, upVector.p->data, upVector.len);
	optimize__eeudQqKpsCGADmehoyDrGg((&dataA));
	optimize__eeudQqKpsCGADmehoyDrGg((&dataB));
	result = createDiffs__0TnXdQ7QHEzi9a9cCvrMrLDw((&dataA), (&dataB));
	{
		LA1_:;
	}
	{
		eqdestroy___SAcH79b5ZePfUS16V9akl1gA((&upVector));
		eqdestroy___SAcH79b5ZePfUS16V9akl1gA((&downVector));
		eqdestroy___dmZnuXPaxyPyWuhqtARb9cQ((&dataB));
		eqdestroy___dmZnuXPaxyPyWuhqtARb9cQ((&dataA));
		eqdestroy___lwIu9ceDEO2io3r6Dd2R1qw((&h));
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___XnnxnWxIcbyfm2N1q2H5wg)(tySequence__4CoKBAViiN2VV33Ov2SWmA* dest) {
	NI colontmp_;
	colontmp_ = ((NI) 0);
	{
		while (1) {
			NI T3_;
			T3_ = (*dest).len;
			if (!(colontmp_ < T3_)) goto LA2;
			colontmp_ += ((NI) 1);
		} LA2: ;
	}
	if ((*dest).p && !((*dest).p->cap & NIM_STRLIT_FLAG)) {
 deallocShared((*dest).p);
}
}
