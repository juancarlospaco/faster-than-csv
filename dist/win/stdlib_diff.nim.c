/* Generated by Nim Compiler v1.3.5 */
/*  (c)2020 Andreas Rumpf */
/* The generated code is subject to the original license. */
#define NIM_INTBITS 64
/* section: NIM_merge_HEADERS */
#include "nimbase.h"
#include <string.h>
#undef LANGUAGE_C
#undef MIPSEB
#undef MIPSEL
#undef PPC
#undef R3000
#undef R4000
#undef i386
#undef linux
#undef mips
#undef near
#undef far
#undef powerpc
#undef unix
/* section: NIM_merge_FRAME_DEFINES */
#define nimfr_(x,y)
#define nimln_(x,y)
/* section: NIM_merge_FORWARD_TYPES */
typedef struct tySequence__4CoKBAViiN2VV33Ov2SWmA tySequence__4CoKBAViiN2VV33Ov2SWmA;
typedef struct TGenericSeq TGenericSeq;
typedef struct tyObject_Item__T8diAqAiCs9bhc5T1iInskQ tyObject_Item__T8diAqAiCs9bhc5T1iInskQ;
typedef struct NimStringDesc NimStringDesc;
typedef struct tyObject_Table__i55W8RrwGKsG9cl0sAKxgkQ tyObject_Table__i55W8RrwGKsG9cl0sAKxgkQ;
typedef struct tySequence__pUxI6Ljo6IKKHXKOZkQ7Og tySequence__pUxI6Ljo6IKKHXKOZkQ7Og;
typedef struct tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA;
typedef struct tySequence__qwqHTkRvwhrRyENtudHQ7g tySequence__qwqHTkRvwhrRyENtudHQ7g;
typedef struct tySequence__shxop0zPIs5Ec3k71aCLuQ tySequence__shxop0zPIs5Ec3k71aCLuQ;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct tyObject_Smsrd__HK3j7rpjuYY9amQl7YxkoaA tyObject_Smsrd__HK3j7rpjuYY9amQl7YxkoaA;
typedef struct tyTuple__sr3s7uVHpu9cEbbDnCSg8yQ tyTuple__sr3s7uVHpu9cEbbDnCSg8yQ;
/* section: NIM_merge_TYPES */
struct TGenericSeq{
NI len;
NI reserved;};
struct tyObject_Item__T8diAqAiCs9bhc5T1iInskQ{
NI startA;
NI startB;
NI deletedA;
NI insertedB;};
struct NimStringDesc{
  TGenericSeq Sup;
NIM_CHAR data[SEQ_DECL_SIZE];};
struct tyObject_Table__i55W8RrwGKsG9cl0sAKxgkQ{
tySequence__pUxI6Ljo6IKKHXKOZkQ7Og* data;
NI counter;};
struct tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA{
tySequence__qwqHTkRvwhrRyENtudHQ7g* data;
tySequence__shxop0zPIs5Ec3k71aCLuQ* modified;};
typedef NU8 tyEnum_TNimKind__jIBKr1ejBgsfM33Kxw4j7A;
typedef NU8 tySet_tyEnum_TNimTypeFlag__v8QUszD1sWlSIWZz7mC4bQ;
typedef N_NIMCALL_PTR(void,tyProc__ojoeKfW4VYIm36I9cpDTQIg)(void* p,NI op);
typedef N_NIMCALL_PTR(void*,tyProc__WSm2xU5ARYv9aAR4l0z9c9auQ)(void* p);
struct TNimType{
NI size;
NI align;
tyEnum_TNimKind__jIBKr1ejBgsfM33Kxw4j7A kind;
tySet_tyEnum_TNimTypeFlag__v8QUszD1sWlSIWZz7mC4bQ flags;
TNimType* base;
TNimNode* node;
void* finalizer;
tyProc__ojoeKfW4VYIm36I9cpDTQIg marker;
tyProc__WSm2xU5ARYv9aAR4l0z9c9auQ deepcopy;};
typedef NU8 tyEnum_TNimNodeKind__unfNsxrcATrufDZmpBq4HQ;
struct TNimNode{
tyEnum_TNimNodeKind__unfNsxrcATrufDZmpBq4HQ kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;};
struct tyObject_Smsrd__HK3j7rpjuYY9amQl7YxkoaA{
NI x;
NI y;};
struct tyTuple__sr3s7uVHpu9cEbbDnCSg8yQ{
NI Field0;
NimStringDesc* Field1;
NI Field2;};
/* section: NIM_merge_SEQ_TYPES */
struct tySequence__4CoKBAViiN2VV33Ov2SWmA{
  TGenericSeq Sup;
  tyObject_Item__T8diAqAiCs9bhc5T1iInskQ data[SEQ_DECL_SIZE];};
struct tySequence__qwqHTkRvwhrRyENtudHQ7g{
  TGenericSeq Sup;
  NI data[SEQ_DECL_SIZE];};
struct tySequence__shxop0zPIs5Ec3k71aCLuQ{
  TGenericSeq Sup;
  NIM_BOOL data[SEQ_DECL_SIZE];};
struct tySequence__pUxI6Ljo6IKKHXKOZkQ7Og{
  TGenericSeq Sup;
  tyTuple__sr3s7uVHpu9cEbbDnCSg8yQ data[SEQ_DECL_SIZE];};
/* section: NIM_merge_PROC_HEADERS */
static N_INLINE(void,nimZeroMem)(void* p,NI size);
static N_INLINE(void,nimSetMem__zxfKBYntu9cBapkhrCOk1fgmemory)(void* a,int v,NI size);
static N_INLINE(NIM_BOOL*,nimErrorFlag)(void);
N_LIB_PRIVATE N_NIMCALL(void,initTable__RrWZeIMfwjxuENvIG9aHB8g)(NI initialSize,tyObject_Table__i55W8RrwGKsG9cl0sAKxgkQ* Result);
N_LIB_PRIVATE N_NIMCALL(void,diffCodes__bj4IfabQ1i8aXAFJt6wTIQ)(NimStringDesc* aText,tyObject_Table__i55W8RrwGKsG9cl0sAKxgkQ* h,tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA* Result);
static N_INLINE(void,unsureAsgnRef)(void** dest,void* src);
N_LIB_PRIVATE N_NIMCALL(NI,len__Zznl29aXDrD6SwhrugG3NyA)(tyObject_Table__i55W8RrwGKsG9cl0sAKxgkQ t);
N_LIB_PRIVATE N_NIMCALL(tySequence__qwqHTkRvwhrRyENtudHQ7g*,newSeq__eA9b5cYyFZe7gRm4F9aRTKlA)(NI len);
N_LIB_PRIVATE N_NIMCALL(NimStringDesc*,substr__2yh9cer0ymNRHlOOg8P7IuA)(NimStringDesc* s,NI first,NI last);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL,contains__aOI3jq5GpcZWNc9aNWt3Shw)(tyObject_Table__i55W8RrwGKsG9cl0sAKxgkQ t,NimStringDesc* key);
N_LIB_PRIVATE N_NIMCALL(NI*,X5BX5D___UtkVeTv4Q8MPC5159bNq7dw)(tyObject_Table__i55W8RrwGKsG9cl0sAKxgkQ* t,NimStringDesc* key);
N_LIB_PRIVATE N_NIMCALL(TGenericSeq*,incrSeqV3)(TGenericSeq* s,TNimType* typ);
N_LIB_PRIVATE N_NIMCALL(void,X5BX5Deq___HfxZpUfki4UkuP38hbwROA)(tyObject_Table__i55W8RrwGKsG9cl0sAKxgkQ* t,NimStringDesc* key,NI val);
N_LIB_PRIVATE N_NIMCALL(tySequence__shxop0zPIs5Ec3k71aCLuQ*,newSeq__U5V382ej7wXp4NiZ9bGeoQQ)(NI len);
N_LIB_PRIVATE N_NIMCALL(void,clear__VYLD6MqB59amU6bk9ahC8zNw_2)(tyObject_Table__i55W8RrwGKsG9cl0sAKxgkQ* t);
static N_INLINE(NI,len__o7VhyDUugDuGyG9axgVfS6Qdiff)(tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA d);
N_LIB_PRIVATE N_NIMCALL(void,lcs__1Y0zJGDNLi50R9bMO8nW6Eg)(tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA* dataA,NI lowerA,NI upperA,tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA* dataB,NI lowerB,NI upperB,NI* downVector,NI downVectorLen_0,NI* upVector,NI upVectorLen_0);
N_LIB_PRIVATE N_NIMCALL(tyObject_Smsrd__HK3j7rpjuYY9amQl7YxkoaA,sms__nqz0neVKEAoytnLzHeNcrg)(tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA* dataA,NI lowerA,NI upperA,tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA dataB,NI lowerB,NI upperB,NI* downVector,NI downVectorLen_0,NI* upVector,NI upVectorLen_0);
N_LIB_PRIVATE N_NIMCALL(void,optimize__eeudQqKpsCGADmehoyDrGg)(tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA* data);
N_LIB_PRIVATE N_NIMCALL(tySequence__4CoKBAViiN2VV33Ov2SWmA*,createDiffs__0TnXdQ7QHEzi9a9cCvrMrLDw)(tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA dataA,tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA dataB);
static N_NIMCALL(void,Marker_tySequence__4CoKBAViiN2VV33Ov2SWmA)(void* p,NI op);
/* section: NIM_merge_DATA */
extern TNimType NTI__qwqHTkRvwhrRyENtudHQ7g_;
N_LIB_PRIVATE TNimType NTI__T8diAqAiCs9bhc5T1iInskQ_;
extern TNimType NTI__rR5Bzr1D5krxoo1NcNyeMA_;
N_LIB_PRIVATE TNimType NTI__4CoKBAViiN2VV33Ov2SWmA_;
/* section: NIM_merge_VARS */
extern NIM_BOOL nimInErrorMode__759bT87luu8XGcbkw13FUjA;
/* section: NIM_merge_PROCS */
static N_INLINE(void,nimSetMem__zxfKBYntu9cBapkhrCOk1fgmemory)(void* a,int v,NI size){
 void* T1_;
 T1_=(void*)0;
 T1_=memset(a,v,((size_t)(size)));}
static N_INLINE(NIM_BOOL*,nimErrorFlag)(void){
 NIM_BOOL* result;
 result=(NIM_BOOL*)0;
 result=(&nimInErrorMode__759bT87luu8XGcbkw13FUjA);
 return result;}
static N_INLINE(void,nimZeroMem)(void* p,NI size){
NIM_BOOL* nimErr_;
{nimErr_=nimErrorFlag();
 nimSetMem__zxfKBYntu9cBapkhrCOk1fgmemory(p,((int)0),size);
 if(NIM_UNLIKELY(*nimErr_))goto BeforeRet_;
 }BeforeRet_: ;}
static N_INLINE(void,unsureAsgnRef)(void** dest,void* src){
 (*dest)= src;}
N_LIB_PRIVATE N_NIMCALL(void,diffCodes__bj4IfabQ1i8aXAFJt6wTIQ)(NimStringDesc* aText,tyObject_Table__i55W8RrwGKsG9cl0sAKxgkQ* h,tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA* Result){
 NI lastUsedCode;
 NI T44_;
NIM_BOOL* nimErr_;
{nimErr_=nimErrorFlag();
 unsureAsgnRef((void**)&(*Result).data,NIM_NIL);
 unsureAsgnRef((void**)&(*Result).modified,NIM_NIL);
 lastUsedCode=len__Zznl29aXDrD6SwhrugG3NyA((*h));
 if(NIM_UNLIKELY(*nimErr_))goto BeforeRet_;
 (*Result).data=newSeq__eA9b5cYyFZe7gRm4F9aRTKlA(((NI)0));
 {
  NimStringDesc* s;
  NI first;
  NI last;
  NI eolpos;
  s=(NimStringDesc*)0;
  first=((NI)0);
  last=((NI)0);
  eolpos=((NI)0);
  {
   while(1){
    NI T25_;
    {
     while(1){
      NIM_BOOL T6_;
      T6_=(NIM_BOOL)0;
      T6_=(last<(aText ? aText->Sup.len : 0));
      if(!(T6_))goto LA7_;
      T6_=!((((NU8)(aText->data[last]))==((NU8)(13))||((NU8)(aText->data[last]))==((NU8)(10))));
      LA7_: ;
      if(!T6_)goto LA5;
      last+=((NI)1);
     }LA5: ;
    }
    eolpos=last;
    {
     if(!(last<(aText ? aText->Sup.len : 0)))goto LA10_;
     {
      if(!((NU8)(aText->data[last])==(NU8)(10)))goto LA14_;
      last+=((NI)1);
     }
     goto LA12_;
     LA14_: ;
     {
      if(!((NU8)(aText->data[last])==(NU8)(13)))goto LA17_;
      last+=((NI)1);
      {
       NIM_BOOL T21_;
       T21_=(NIM_BOOL)0;
       T21_=(last<(aText ? aText->Sup.len : 0));
       if(!(T21_))goto LA22_;
       T21_=((NU8)(aText->data[last])==(NU8)(10));
       LA22_: ;
       if(!T21_)goto LA23_;
       last+=((NI)1);
      }
      LA23_: ;
     }
     goto LA12_;
     LA17_: ;
     LA12_: ;
    }
    LA10_: ;
    T25_=(NI)0;
    {
     if(!NIM_FALSE)goto LA28_;
     T25_=(NI)(last-((NI)1));
    }
    goto LA26_;
    LA28_: ;
    {
     T25_=(NI)(eolpos-((NI)1));
    }
    LA26_: ;
    s=substr__2yh9cer0ymNRHlOOg8P7IuA(aText,first,T25_);
    {
     NIM_BOOL T33_;
     NI* T36_;
     NI T37_;
     T33_=(NIM_BOOL)0;
     T33_=contains__aOI3jq5GpcZWNc9aNWt3Shw((*h),s);
     if(NIM_UNLIKELY(*nimErr_))goto BeforeRet_;
     if(!T33_)goto LA34_;
     T36_=(NI*)0;
     T36_=X5BX5D___UtkVeTv4Q8MPC5159bNq7dw(h,s);
     if(NIM_UNLIKELY(*nimErr_))goto BeforeRet_;
     (*Result).data=(tySequence__qwqHTkRvwhrRyENtudHQ7g*)incrSeqV3((TGenericSeq*)((*Result).data),(&NTI__qwqHTkRvwhrRyENtudHQ7g_));
     T37_=(*Result).data->Sup.len++;
     (*Result).data->data[T37_]=(*T36_);
    }
    goto LA31_;
    LA34_: ;
    {
     NI T39_;
     lastUsedCode+=((NI)1);
     X5BX5Deq___HfxZpUfki4UkuP38hbwROA(h,s,lastUsedCode);
     if(NIM_UNLIKELY(*nimErr_))goto BeforeRet_;
     (*Result).data=(tySequence__qwqHTkRvwhrRyENtudHQ7g*)incrSeqV3((TGenericSeq*)((*Result).data),(&NTI__qwqHTkRvwhrRyENtudHQ7g_));
     T39_=(*Result).data->Sup.len++;
     (*Result).data->data[T39_]=lastUsedCode;
    }
    LA31_: ;
    {
     if(!(eolpos==last))goto LA42_;
     goto LA2;
    }
    LA42_: ;
    first=last;
   }
  }LA2: ;
 }
 T44_=((*Result).data ?(*Result).data->Sup.len : 0);
 (*Result).modified=newSeq__U5V382ej7wXp4NiZ9bGeoQQ(((NI)((NI)(T44_+((NI)2)))));
 }BeforeRet_: ;}
static N_INLINE(NI,len__o7VhyDUugDuGyG9axgVfS6Qdiff)(tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA d){
 NI result;
 NI T1_;
 result=(NI)0;
 T1_=(d.data ? d.data->Sup.len : 0);
 result=T1_;
 return result;}
N_LIB_PRIVATE N_NIMCALL(tyObject_Smsrd__HK3j7rpjuYY9amQl7YxkoaA,sms__nqz0neVKEAoytnLzHeNcrg)(tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA* dataA,NI lowerA,NI upperA,tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA dataB,NI lowerB,NI upperB,NI* downVector,NI downVectorLen_0,NI* upVector,NI upVectorLen_0){
 tyObject_Smsrd__HK3j7rpjuYY9amQl7YxkoaA result;
 NI max;
 NI T1_;
 NI T2_;
 NI downK;
 NI upK;
 NI delta;
 NIM_BOOL oddDelta;
 NI downOffset;
 NI upOffset;
 NI maxD;
NIM_BOOL* nimErr_;
{nimErr_=nimErrorFlag();
 nimZeroMem((void*)(&result),sizeof(tyObject_Smsrd__HK3j7rpjuYY9amQl7YxkoaA));
 T1_=(NI)0;
 T1_=len__o7VhyDUugDuGyG9axgVfS6Qdiff((*dataA));
 if(NIM_UNLIKELY(*nimErr_))goto BeforeRet_;
 T2_=(NI)0;
 T2_=len__o7VhyDUugDuGyG9axgVfS6Qdiff(dataB);
 if(NIM_UNLIKELY(*nimErr_))goto BeforeRet_;
 max=(NI)((NI)(T1_+T2_)+((NI)1));
 downK=(NI)(lowerA-lowerB);
 upK=(NI)(upperA-upperB);
 delta=(NI)((NI)(upperA-lowerA)-(NI)(upperB-lowerB));
 oddDelta=!(((NI)(delta&((NI)1))==((NI)0)));
 downOffset=(NI)(max-downK);
 upOffset=(NI)(max-upK);
 maxD=(NI)((NI)((NI)((NI)((NI)(upperA-lowerA)+ upperB)- lowerB)/((NI)2))+((NI)1));
 downVector[(NI)((NI)(downOffset+downK)+((NI)1))]=lowerA;
 upVector[(NI)((NI)(upOffset+upK)-((NI)1))]=upperA;
 {
  NI D;
  NI res;
  D=(NI)0;
  res=((NI)0);
  {
   while(1){
    if(!(res<=maxD))goto LA5;
    D=res;
    {
     NI k;
     NI colontmp_;
     NI colontmp__2;
     NI res_2;
     k=(NI)0;
     colontmp_=(NI)0;
     colontmp__2=(NI)0;
     colontmp_=(NI)(downK-D);
     colontmp__2=(NI)(downK+D);
     res_2=colontmp_;
     {
      while(1){
       NI x;
       NI y;
       if(!(res_2<=colontmp__2))goto LA8;
       k=res_2;
       x=(NI)0;
       {
        if(!(k==(NI)(downK-D)))goto LA11_;
        x=downVector[(NI)((NI)(downOffset+k)+((NI)1))];
       }
       goto LA9_;
       LA11_: ;
       {
        x=(NI)(downVector[(NI)((NI)(downOffset+k)-((NI)1))]+((NI)1));
        {
         NIM_BOOL T16_;
         T16_=(NIM_BOOL)0;
         T16_=(k<(NI)(downK+D));
         if(!(T16_))goto LA17_;
         T16_=(x<=downVector[(NI)((NI)(downOffset+k)+((NI)1))]);
         LA17_: ;
         if(!T16_)goto LA18_;
         x=downVector[(NI)((NI)(downOffset+k)+((NI)1))];
        }
        LA18_: ;
       }
       LA9_: ;
       y=(NI)(x-k);
       {
        while(1){
         NIM_BOOL T22_;
         NIM_BOOL T23_;
         T22_=(NIM_BOOL)0;
         T23_=(NIM_BOOL)0;
         T23_=(x<upperA);
         if(!(T23_))goto LA24_;
         T23_=(y<upperB);
         LA24_: ;
         T22_=T23_;
         if(!(T22_))goto LA25_;
         T22_=((*dataA).data->data[x]==dataB.data->data[y]);
         LA25_: ;
         if(!T22_)goto LA21;
         x+=((NI)1);
         y+=((NI)1);
        }LA21: ;
       }
       downVector[(NI)(downOffset+k)]=x;
       {
        NIM_BOOL T28_;
        NIM_BOOL T29_;
        T28_=(NIM_BOOL)0;
        T29_=(NIM_BOOL)0;
        T29_=oddDelta;
        if(!(T29_))goto LA30_;
        T29_=((NI)(upK-D)< k);
        LA30_: ;
        T28_=T29_;
        if(!(T28_))goto LA31_;
        T28_=(k<(NI)(upK+D));
        LA31_: ;
        if(!T28_)goto LA32_;
        {
         if(!(upVector[(NI)(upOffset+k)]<=downVector[(NI)(downOffset+k)]))goto LA36_;
         nimZeroMem((void*)(&result),sizeof(tyObject_Smsrd__HK3j7rpjuYY9amQl7YxkoaA));
         result.x=downVector[(NI)(downOffset+k)];
         result.y=(NI)(downVector[(NI)(downOffset+k)]-k);
         goto BeforeRet_;
        }
        LA36_: ;
       }
       LA32_: ;
       res_2+=((NI)2);
      }LA8: ;
     }
    }
    {
     NI k_2;
     NI colontmp__3;
     NI colontmp__4;
     NI res_3;
     k_2=(NI)0;
     colontmp__3=(NI)0;
     colontmp__4=(NI)0;
     colontmp__3=(NI)(upK-D);
     colontmp__4=(NI)(upK+D);
     res_3=colontmp__3;
     {
      while(1){
       NI x_2;
       NI y_2;
       if(!(res_3<=colontmp__4))goto LA40;
       k_2=res_3;
       x_2=(NI)0;
       {
        if(!(k_2==(NI)(upK+D)))goto LA43_;
        x_2=upVector[(NI)((NI)(upOffset+k_2)-((NI)1))];
       }
       goto LA41_;
       LA43_: ;
       {
        x_2=(NI)(upVector[(NI)((NI)(upOffset+k_2)+((NI)1))]-((NI)1));
        {
         NIM_BOOL T48_;
         T48_=(NIM_BOOL)0;
         T48_=((NI)(upK-D)< k_2);
         if(!(T48_))goto LA49_;
         T48_=(upVector[(NI)((NI)(upOffset+k_2)-((NI)1))]<x_2);
         LA49_: ;
         if(!T48_)goto LA50_;
         x_2=upVector[(NI)((NI)(upOffset+k_2)-((NI)1))];
        }
        LA50_: ;
       }
       LA41_: ;
       y_2=(NI)(x_2-k_2);
       {
        while(1){
         NIM_BOOL T54_;
         NIM_BOOL T55_;
         T54_=(NIM_BOOL)0;
         T55_=(NIM_BOOL)0;
         T55_=(lowerA<x_2);
         if(!(T55_))goto LA56_;
         T55_=(lowerB<y_2);
         LA56_: ;
         T54_=T55_;
         if(!(T54_))goto LA57_;
         T54_=((*dataA).data->data[(NI)(x_2-((NI)1))]==dataB.data->data[(NI)(y_2-((NI)1))]);
         LA57_: ;
         if(!T54_)goto LA53;
         x_2==((NI)1);
         y_2==((NI)1);
        }LA53: ;
       }
       upVector[(NI)(upOffset+k_2)]=x_2;
       {
        NIM_BOOL T60_;
        NIM_BOOL T61_;
        T60_=(NIM_BOOL)0;
        T61_=(NIM_BOOL)0;
        T61_=!(oddDelta);
        if(!(T61_))goto LA62_;
        T61_=((NI)(downK-D)<= k_2);
        LA62_: ;
        T60_=T61_;
        if(!(T60_))goto LA63_;
        T60_=(k_2<=(NI)(downK+D));
        LA63_: ;
        if(!T60_)goto LA64_;
        {
         if(!(upVector[(NI)(upOffset+k_2)]<=downVector[(NI)(downOffset+k_2)]))goto LA68_;
         nimZeroMem((void*)(&result),sizeof(tyObject_Smsrd__HK3j7rpjuYY9amQl7YxkoaA));
         result.x=downVector[(NI)(downOffset+k_2)];
         result.y=(NI)(downVector[(NI)(downOffset+k_2)]-k_2);
         goto BeforeRet_;
        }
        LA68_: ;
       }
       LA64_: ;
       res_3+=((NI)2);
      }LA40: ;
     }
    }
    res+=((NI)1);
   }LA5: ;
  }
 }
 }BeforeRet_: ;
 return result;}
N_LIB_PRIVATE N_NIMCALL(void,lcs__1Y0zJGDNLi50R9bMO8nW6Eg)(tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA* dataA,NI lowerA,NI upperA,tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA* dataB,NI lowerB,NI upperB,NI* downVector,NI downVectorLen_0,NI* upVector,NI upVectorLen_0){
 NI lowerA_2;
 NI lowerB_2;
 NI upperA_2;
 NI upperB_2;
NIM_BOOL* nimErr_;
{nimErr_=nimErrorFlag();
 lowerA_2=lowerA;
 lowerB_2=lowerB;
 upperA_2=upperA;
 upperB_2=upperB;
 {
  while(1){
   NIM_BOOL T3_;
   NIM_BOOL T4_;
   T3_=(NIM_BOOL)0;
   T4_=(NIM_BOOL)0;
   T4_=(lowerA_2<upperA_2);
   if(!(T4_))goto LA5_;
   T4_=(lowerB_2<upperB_2);
   LA5_: ;
   T3_=T4_;
   if(!(T3_))goto LA6_;
   T3_=((*dataA).data->data[lowerA_2]==(*dataB).data->data[lowerB_2]);
   LA6_: ;
   if(!T3_)goto LA2;
   lowerA_2+=((NI)1);
   lowerB_2+=((NI)1);
  }LA2: ;
 }
 {
  while(1){
   NIM_BOOL T9_;
   NIM_BOOL T10_;
   T9_=(NIM_BOOL)0;
   T10_=(NIM_BOOL)0;
   T10_=(lowerA_2<upperA_2);
   if(!(T10_))goto LA11_;
   T10_=(lowerB_2<upperB_2);
   LA11_: ;
   T9_=T10_;
   if(!(T9_))goto LA12_;
   T9_=((*dataA).data->data[(NI)(upperA_2-((NI)1))]==(*dataB).data->data[(NI)(upperB_2-((NI)1))]);
   LA12_: ;
   if(!T9_)goto LA8;
   upperA_2==((NI)1);
   upperB_2==((NI)1);
  }LA8: ;
 }
 {
  if(!(lowerA_2==upperA_2))goto LA15_;
  {
   while(1){
    if(!(lowerB_2<upperB_2))goto LA18;
    (*dataB).modified->data[lowerB_2]=NIM_TRUE;
    lowerB_2+=((NI)1);
   }LA18: ;
  }
 }
 goto LA13_;
 LA15_: ;
 {
  if(!(lowerB_2==upperB_2))goto LA20_;
  {
   while(1){
    if(!(lowerA_2<upperA_2))goto LA23;
    (*dataA).modified->data[lowerA_2]=NIM_TRUE;
    lowerA_2+=((NI)1);
   }LA23: ;
  }
 }
 goto LA13_;
 LA20_: ;
 {
  tyObject_Smsrd__HK3j7rpjuYY9amQl7YxkoaA smsrd;
  smsrd=sms__nqz0neVKEAoytnLzHeNcrg(dataA,lowerA_2,upperA_2,(*dataB),lowerB_2,upperB_2,downVector,downVectorLen_0,upVector,upVectorLen_0);
  if(NIM_UNLIKELY(*nimErr_))goto BeforeRet_;
  lcs__1Y0zJGDNLi50R9bMO8nW6Eg(dataA,lowerA_2,smsrd.x,dataB,lowerB_2,smsrd.y,downVector,downVectorLen_0,upVector,upVectorLen_0);
  if(NIM_UNLIKELY(*nimErr_))goto BeforeRet_;
  lcs__1Y0zJGDNLi50R9bMO8nW6Eg(dataA,smsrd.x,upperA_2,dataB,smsrd.y,upperB_2,downVector,downVectorLen_0,upVector,upVectorLen_0);
  if(NIM_UNLIKELY(*nimErr_))goto BeforeRet_;
 }
 LA13_: ;
 }BeforeRet_: ;}
N_LIB_PRIVATE N_NIMCALL(void,optimize__eeudQqKpsCGADmehoyDrGg)(tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA* data){
 NI startPos;
NIM_BOOL* nimErr_;
{nimErr_=nimErrorFlag();
 startPos=((NI)0);
 {
  while(1){
   NI T3_;
   NI endPos;
   T3_=(NI)0;
   T3_=len__o7VhyDUugDuGyG9axgVfS6Qdiff((*data));
   if(NIM_UNLIKELY(*nimErr_))goto BeforeRet_;
   if(!(startPos<T3_))goto LA2;
   {
    while(1){
     NIM_BOOL T6_;
     NI T7_;
     T6_=(NIM_BOOL)0;
     T7_=(NI)0;
     T7_=len__o7VhyDUugDuGyG9axgVfS6Qdiff((*data));
     if(NIM_UNLIKELY(*nimErr_))goto BeforeRet_;
     T6_=(startPos<T7_);
     if(!(T6_))goto LA8_;
     T6_=!((*data).modified->data[startPos]);
     LA8_: ;
     if(!T6_)goto LA5;
     startPos+=((NI)1);
    }LA5: ;
   }
   endPos=startPos;
   {
    while(1){
     NIM_BOOL T11_;
     NI T12_;
     T11_=(NIM_BOOL)0;
     T12_=(NI)0;
     T12_=len__o7VhyDUugDuGyG9axgVfS6Qdiff((*data));
     if(NIM_UNLIKELY(*nimErr_))goto BeforeRet_;
     T11_=(endPos<T12_);
     if(!(T11_))goto LA13_;
     T11_=(*data).modified->data[endPos];
     LA13_: ;
     if(!T11_)goto LA10;
     endPos+=((NI)1);
    }LA10: ;
   }
   {
    NIM_BOOL T16_;
    NI T17_;
    T16_=(NIM_BOOL)0;
    T17_=(NI)0;
    T17_=len__o7VhyDUugDuGyG9axgVfS6Qdiff((*data));
    if(NIM_UNLIKELY(*nimErr_))goto BeforeRet_;
    T16_=(endPos<T17_);
    if(!(T16_))goto LA18_;
    T16_=((*data).data->data[startPos]==(*data).data->data[endPos]);
    LA18_: ;
    if(!T16_)goto LA19_;
    (*data).modified->data[startPos]=NIM_FALSE;
    (*data).modified->data[endPos]=NIM_TRUE;
   }
   goto LA14_;
   LA19_: ;
   {
    startPos=endPos;
   }
   LA14_: ;
  }LA2: ;
 }
 }BeforeRet_: ;}
static N_NIMCALL(void,Marker_tySequence__4CoKBAViiN2VV33Ov2SWmA)(void* p,NI op){
 tySequence__4CoKBAViiN2VV33Ov2SWmA* a;
 NI T1_;
 a=(tySequence__4CoKBAViiN2VV33Ov2SWmA*)p;
 T1_=(NI)0;}
N_LIB_PRIVATE N_NIMCALL(tySequence__4CoKBAViiN2VV33Ov2SWmA*,createDiffs__0TnXdQ7QHEzi9a9cCvrMrLDw)(tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA dataA,tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA dataB){
 tySequence__4CoKBAViiN2VV33Ov2SWmA* result;
 NI startA;
 NI startB;
 NI lineA;
 NI lineB;
NIM_BOOL* nimErr_;
{nimErr_=nimErrorFlag();
 result=(tySequence__4CoKBAViiN2VV33Ov2SWmA*)0;
 startA=((NI)0);
 startB=((NI)0);
 lineA=((NI)0);
 lineB=((NI)0);
 {
  while(1){
   NIM_BOOL T3_;
   NI T4_;
   NI T6_;
   T3_=(NIM_BOOL)0;
   T4_=(NI)0;
   T4_=len__o7VhyDUugDuGyG9axgVfS6Qdiff(dataA);
   if(NIM_UNLIKELY(*nimErr_))goto BeforeRet_;
   T3_=(lineA<T4_);
   if(T3_)goto LA5_;
   T6_=(NI)0;
   T6_=len__o7VhyDUugDuGyG9axgVfS6Qdiff(dataB);
   if(NIM_UNLIKELY(*nimErr_))goto BeforeRet_;
   T3_=(lineB<T6_);
   LA5_: ;
   if(!T3_)goto LA2;
   {
    NIM_BOOL T9_;
    NIM_BOOL T10_;
    NIM_BOOL T11_;
    NI T12_;
    NI T15_;
    T9_=(NIM_BOOL)0;
    T10_=(NIM_BOOL)0;
    T11_=(NIM_BOOL)0;
    T12_=(NI)0;
    T12_=len__o7VhyDUugDuGyG9axgVfS6Qdiff(dataA);
    if(NIM_UNLIKELY(*nimErr_))goto BeforeRet_;
    T11_=(lineA<T12_);
    if(!(T11_))goto LA13_;
    T11_=!(dataA.modified->data[lineA]);
    LA13_: ;
    T10_=T11_;
    if(!(T10_))goto LA14_;
    T15_=(NI)0;
    T15_=len__o7VhyDUugDuGyG9axgVfS6Qdiff(dataB);
    if(NIM_UNLIKELY(*nimErr_))goto BeforeRet_;
    T10_=(lineB<T15_);
    LA14_: ;
    T9_=T10_;
    if(!(T9_))goto LA16_;
    T9_=!(dataB.modified->data[lineB]);
    LA16_: ;
    if(!T9_)goto LA17_;
    lineA+=((NI)1);
    lineB+=((NI)1);
   }
   goto LA7_;
   LA17_: ;
   {
    startA=lineA;
    startB=lineB;
    {
     while(1){
      NIM_BOOL T22_;
      NI T23_;
      NIM_BOOL T25_;
      NI T26_;
      T22_=(NIM_BOOL)0;
      T23_=(NI)0;
      T23_=len__o7VhyDUugDuGyG9axgVfS6Qdiff(dataA);
      if(NIM_UNLIKELY(*nimErr_))goto BeforeRet_;
      T22_=(lineA<T23_);
      if(!(T22_))goto LA24_;
      T25_=(NIM_BOOL)0;
      T26_=(NI)0;
      T26_=len__o7VhyDUugDuGyG9axgVfS6Qdiff(dataB);
      if(NIM_UNLIKELY(*nimErr_))goto BeforeRet_;
      T25_=(T26_<=lineB);
      if(T25_)goto LA27_;
      T25_=dataA.modified->data[lineA];
      LA27_: ;
      T22_=T25_;
      LA24_: ;
      if(!T22_)goto LA21;
      lineA+=((NI)1);
     }LA21: ;
    }
    {
     while(1){
      NIM_BOOL T30_;
      NI T31_;
      NIM_BOOL T33_;
      NI T34_;
      T30_=(NIM_BOOL)0;
      T31_=(NI)0;
      T31_=len__o7VhyDUugDuGyG9axgVfS6Qdiff(dataB);
      if(NIM_UNLIKELY(*nimErr_))goto BeforeRet_;
      T30_=(lineB<T31_);
      if(!(T30_))goto LA32_;
      T33_=(NIM_BOOL)0;
      T34_=(NI)0;
      T34_=len__o7VhyDUugDuGyG9axgVfS6Qdiff(dataA);
      if(NIM_UNLIKELY(*nimErr_))goto BeforeRet_;
      T33_=(T34_<=lineA);
      if(T33_)goto LA35_;
      T33_=dataB.modified->data[lineB];
      LA35_: ;
      T30_=T33_;
      LA32_: ;
      if(!T30_)goto LA29;
      lineB+=((NI)1);
     }LA29: ;
    }
    {
     NIM_BOOL T38_;
     tyObject_Item__T8diAqAiCs9bhc5T1iInskQ T42_;
     NI T43_;
     T38_=(NIM_BOOL)0;
     T38_=(startA<lineA);
     if(T38_)goto LA39_;
     T38_=(startB<lineB);
     LA39_: ;
     if(!T38_)goto LA40_;
     nimZeroMem((void*)(&T42_),sizeof(tyObject_Item__T8diAqAiCs9bhc5T1iInskQ));
     T42_.startA=startA;
     T42_.startB=startB;
     T42_.deletedA=(NI)(lineA-startA);
     T42_.insertedB=(NI)(lineB-startB);
     result=(tySequence__4CoKBAViiN2VV33Ov2SWmA*)incrSeqV3((TGenericSeq*)(result),(&NTI__4CoKBAViiN2VV33Ov2SWmA_));
     T43_=result->Sup.len++;
     result->data[T43_]=T42_;
    }
    LA40_: ;
   }
   LA7_: ;
  }LA2: ;
 }
 }BeforeRet_: ;
 return result;}
N_LIB_PRIVATE N_NIMCALL(tySequence__4CoKBAViiN2VV33Ov2SWmA*,diffText__N3nD9arGGt9aXEjAYAYs9aSFA)(NimStringDesc* textA,NimStringDesc* textB){
 tySequence__4CoKBAViiN2VV33Ov2SWmA* result;
 tyObject_Table__i55W8RrwGKsG9cl0sAKxgkQ h;
 tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA dataA;
 tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA dataB;
 NI max;
 NI T1_;
 NI T2_;
 tySequence__qwqHTkRvwhrRyENtudHQ7g* downVector;
 tySequence__qwqHTkRvwhrRyENtudHQ7g* upVector;
 NI T3_;
 NI T4_;
 NI T5_;
NIM_BOOL* nimErr_;
{nimErr_=nimErrorFlag();
 result=(tySequence__4CoKBAViiN2VV33Ov2SWmA*)0;
 nimZeroMem((void*)(&h),sizeof(tyObject_Table__i55W8RrwGKsG9cl0sAKxgkQ));
 initTable__RrWZeIMfwjxuENvIG9aHB8g(((NI)32),(&h));
 if(NIM_UNLIKELY(*nimErr_))goto BeforeRet_;
 nimZeroMem((void*)(&dataA),sizeof(tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA));
 diffCodes__bj4IfabQ1i8aXAFJt6wTIQ(textA,(&h),(&dataA));
 if(NIM_UNLIKELY(*nimErr_))goto BeforeRet_;
 nimZeroMem((void*)(&dataB),sizeof(tyObject_DiffData__2jWBPQfK28JxUE9aPN5pVMA));
 diffCodes__bj4IfabQ1i8aXAFJt6wTIQ(textB,(&h),(&dataB));
 if(NIM_UNLIKELY(*nimErr_))goto BeforeRet_;
 clear__VYLD6MqB59amU6bk9ahC8zNw_2((&h));
 if(NIM_UNLIKELY(*nimErr_))goto BeforeRet_;
 T1_=(NI)0;
 T1_=len__o7VhyDUugDuGyG9axgVfS6Qdiff(dataA);
 if(NIM_UNLIKELY(*nimErr_))goto BeforeRet_;
 T2_=(NI)0;
 T2_=len__o7VhyDUugDuGyG9axgVfS6Qdiff(dataB);
 if(NIM_UNLIKELY(*nimErr_))goto BeforeRet_;
 max=(NI)((NI)(T1_+T2_)+((NI)1));
 downVector=newSeq__eA9b5cYyFZe7gRm4F9aRTKlA(((NI)((NI)((NI)(((NI)2)* max)+((NI)2)))));
 upVector=newSeq__eA9b5cYyFZe7gRm4F9aRTKlA(((NI)((NI)((NI)(((NI)2)* max)+((NI)2)))));
 T3_=(NI)0;
 T3_=len__o7VhyDUugDuGyG9axgVfS6Qdiff(dataA);
 if(NIM_UNLIKELY(*nimErr_))goto BeforeRet_;
 T4_=(NI)0;
 T4_=T3_;
 T5_=(NI)0;
 T5_=len__o7VhyDUugDuGyG9axgVfS6Qdiff(dataB);
 if(NIM_UNLIKELY(*nimErr_))goto BeforeRet_;
 lcs__1Y0zJGDNLi50R9bMO8nW6Eg((&dataA),((NI)0),T4_,(&dataB),((NI)0),T5_,downVector->data,(downVector ? downVector->Sup.len : 0),upVector->data,(upVector ? upVector->Sup.len : 0));
 if(NIM_UNLIKELY(*nimErr_))goto BeforeRet_;
 optimize__eeudQqKpsCGADmehoyDrGg((&dataA));
 if(NIM_UNLIKELY(*nimErr_))goto BeforeRet_;
 optimize__eeudQqKpsCGADmehoyDrGg((&dataB));
 if(NIM_UNLIKELY(*nimErr_))goto BeforeRet_;
 result=createDiffs__0TnXdQ7QHEzi9a9cCvrMrLDw(dataA,dataB);
 if(NIM_UNLIKELY(*nimErr_))goto BeforeRet_;
 }BeforeRet_: ;
 return result;}
N_LIB_PRIVATE N_NIMCALL(void,stdlib_diffDatInit000)(void){
/* section: NIM_merge_TYPE_INIT1 */
static TNimNode* TM__Hs1dC9bXrNWc0vwV4GXISCw_2_4[4];
static TNimNode TM__Hs1dC9bXrNWc0vwV4GXISCw_0[5];
/* section: NIM_merge_TYPE_INIT3 */
NTI__T8diAqAiCs9bhc5T1iInskQ_.size=sizeof(tyObject_Item__T8diAqAiCs9bhc5T1iInskQ);
NTI__T8diAqAiCs9bhc5T1iInskQ_.align=NIM_ALIGNOF(tyObject_Item__T8diAqAiCs9bhc5T1iInskQ);
NTI__T8diAqAiCs9bhc5T1iInskQ_.kind=18;
NTI__T8diAqAiCs9bhc5T1iInskQ_.base=0;
NTI__T8diAqAiCs9bhc5T1iInskQ_.flags=3;
TM__Hs1dC9bXrNWc0vwV4GXISCw_2_4[0]=&TM__Hs1dC9bXrNWc0vwV4GXISCw_0[1];
TM__Hs1dC9bXrNWc0vwV4GXISCw_0[1].kind=1;
TM__Hs1dC9bXrNWc0vwV4GXISCw_0[1].offset=offsetof(tyObject_Item__T8diAqAiCs9bhc5T1iInskQ,startA);
TM__Hs1dC9bXrNWc0vwV4GXISCw_0[1].typ=(&NTI__rR5Bzr1D5krxoo1NcNyeMA_);
TM__Hs1dC9bXrNWc0vwV4GXISCw_0[1].name="startA";
TM__Hs1dC9bXrNWc0vwV4GXISCw_2_4[1]=&TM__Hs1dC9bXrNWc0vwV4GXISCw_0[2];
TM__Hs1dC9bXrNWc0vwV4GXISCw_0[2].kind=1;
TM__Hs1dC9bXrNWc0vwV4GXISCw_0[2].offset=offsetof(tyObject_Item__T8diAqAiCs9bhc5T1iInskQ,startB);
TM__Hs1dC9bXrNWc0vwV4GXISCw_0[2].typ=(&NTI__rR5Bzr1D5krxoo1NcNyeMA_);
TM__Hs1dC9bXrNWc0vwV4GXISCw_0[2].name="startB";
TM__Hs1dC9bXrNWc0vwV4GXISCw_2_4[2]=&TM__Hs1dC9bXrNWc0vwV4GXISCw_0[3];
TM__Hs1dC9bXrNWc0vwV4GXISCw_0[3].kind=1;
TM__Hs1dC9bXrNWc0vwV4GXISCw_0[3].offset=offsetof(tyObject_Item__T8diAqAiCs9bhc5T1iInskQ,deletedA);
TM__Hs1dC9bXrNWc0vwV4GXISCw_0[3].typ=(&NTI__rR5Bzr1D5krxoo1NcNyeMA_);
TM__Hs1dC9bXrNWc0vwV4GXISCw_0[3].name="deletedA";
TM__Hs1dC9bXrNWc0vwV4GXISCw_2_4[3]=&TM__Hs1dC9bXrNWc0vwV4GXISCw_0[4];
TM__Hs1dC9bXrNWc0vwV4GXISCw_0[4].kind=1;
TM__Hs1dC9bXrNWc0vwV4GXISCw_0[4].offset=offsetof(tyObject_Item__T8diAqAiCs9bhc5T1iInskQ,insertedB);
TM__Hs1dC9bXrNWc0vwV4GXISCw_0[4].typ=(&NTI__rR5Bzr1D5krxoo1NcNyeMA_);
TM__Hs1dC9bXrNWc0vwV4GXISCw_0[4].name="insertedB";
TM__Hs1dC9bXrNWc0vwV4GXISCw_0[0].len=4;TM__Hs1dC9bXrNWc0vwV4GXISCw_0[0].kind=2;TM__Hs1dC9bXrNWc0vwV4GXISCw_0[0].sons=&TM__Hs1dC9bXrNWc0vwV4GXISCw_2_4[0];
NTI__T8diAqAiCs9bhc5T1iInskQ_.node=&TM__Hs1dC9bXrNWc0vwV4GXISCw_0[0];
NTI__4CoKBAViiN2VV33Ov2SWmA_.size=sizeof(tySequence__4CoKBAViiN2VV33Ov2SWmA*);
NTI__4CoKBAViiN2VV33Ov2SWmA_.align=NIM_ALIGNOF(tySequence__4CoKBAViiN2VV33Ov2SWmA*);
NTI__4CoKBAViiN2VV33Ov2SWmA_.kind=24;
NTI__4CoKBAViiN2VV33Ov2SWmA_.base=(&NTI__T8diAqAiCs9bhc5T1iInskQ_);
NTI__4CoKBAViiN2VV33Ov2SWmA_.flags=2;
NTI__4CoKBAViiN2VV33Ov2SWmA_.marker=Marker_tySequence__4CoKBAViiN2VV33Ov2SWmA;}